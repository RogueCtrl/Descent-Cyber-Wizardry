<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Descent: Cyber Wizardry</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas" width="800" height="600"></canvas>
        <!-- Hidden container to preserve canvas during combat -->
        <div id="canvas-storage" style="display: none;"></div>
        <div id="ui-overlay">
            <div id="character-panel" class="panel">
                <h3 data-text-key="party">Strike Team</h3>
                <div id="party-display"></div>
            </div>
            <div id="game-panel" class="panel">
                <div id="viewport" class="viewport"></div>
                <div id="message-log" class="message-log"></div>
            </div>
            <div id="control-panel" class="panel">
                <div id="movement-controls">
                    <button id="move-forward">Forward</button>
                    <button id="turn-left">Turn Left</button>
                    <button id="turn-right">Turn Right</button>
                    <button id="move-backward">Backward</button>
                </div>
                <div id="action-controls">
                    <button id="cast-spell">Cast Spell</button>
                    <button id="use-item">Use Item</button>
                    <button id="rest">Rest</button>
                    <button id="camp">Camp</button>
                </div>
                <div id="audio-controls">
                    <button id="toggle-audio" title="Toggle Music">ðŸŽµ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Core Systems (EventSystem first, then GameState) -->
    <script src="src/core/EventSystem.js"></script>
    <script src="src/core/GameState.js"></script>
    
    <!-- Data Systems -->
    <script src="src/data/terminology.js"></script>
    
    <!-- Utilities -->
    <script src="src/utils/Random.js"></script>
    <script src="src/utils/Helpers.js"></script>
    <script src="src/utils/Storage.js"></script>
    <script src="src/utils/AttributeRoller.js"></script>
    <script src="src/utils/Modal.js"></script>
    <script src="src/utils/TextManager.js"></script>
    
    <!-- Audio System -->
    <script src="src/audio/AudioManager.js"></script>
    
    <!-- Rendering (load before Engine since Engine depends on these) -->
    <script src="src/rendering/Viewport3D.js"></script>
    <script src="src/rendering/MonsterPortraitRenderer.js"></script>
    <script src="src/rendering/Renderer.js"></script>
    <script src="src/rendering/CharacterUI.js"></script>
    <script src="src/rendering/UI.js"></script>
    
    <!-- Core Engine (load after all dependencies) -->
    <script src="src/core/Engine.js"></script>
    
    <!-- Game Logic -->
    <script src="src/game/Character.js"></script>
    <script src="src/game/CharacterCreator.js"></script>
    <script src="src/game/CharacterRoster.js"></script>
    <script src="src/game/Race.js"></script>
    <script src="src/game/Class.js"></script>
    <script src="src/game/Party.js"></script>
    <script src="src/game/Combat.js"></script>
    <script src="src/game/Dungeon.js"></script>
    <script src="src/game/Equipment.js"></script>
    <script src="src/game/Spells.js"></script>
    <script src="src/game/SpellMemorization.js"></script>
    <script src="src/game/Monster.js"></script>
    <script src="src/game/Formation.js"></script>
    <script src="src/game/CombatInterface.js"></script>
    
    <!-- Entity Migrations -->
    <script src="src/data/migrations/weapons-v1.0.0.js"></script>
    <script src="src/data/migrations/weapons-v1.1.0.js"></script>
    <script src="src/data/migrations/armor-v1.0.0.js"></script>
    <script src="src/data/migrations/armor-v1.1.0.js"></script>
    <script src="src/data/migrations/shields-v1.0.0.js"></script>
    <script src="src/data/migrations/accessories-v1.0.0.js"></script>
    <script src="src/data/migrations/spells-v1.0.0.js"></script>
    <script src="src/data/migrations/spells-v1.1.0.js"></script>
    <script src="src/data/migrations/conditions-v1.0.0.js"></script>
    <script src="src/data/migrations/effects-v1.0.0.js"></script>
    <script src="src/data/migrations/monsters-v1.0.0.js"></script>
    
    <script>
        // Initialize game when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const game = new Engine();
            game.initialize();
        });
    </script>
</body>
</html>